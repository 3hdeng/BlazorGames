@page "/connectfour"
@using BlazorGames.Models.ConnectFour;
@using BlazorGames.Models.ConnectFour.Enums;

<h1>ConnectFour</h1>

@code {

    GameBoard board = new GameBoard();
}


@if (board.WinningPlay == null)
{
    <h2>@board.CurrentTurn's Turn!</h2>

}
else
{
    <h2>@board.WinningPlay.WinningColor Wins! <button class="btn btn-success" @onclick="@(() => board.Reset())">Reset</button></h2>
}

<div class="connectfour-board">
    @for (int i = 0; i < 7; i++)
    {
        <div class="connectfour-column">
            @for (int j = 0; j < 6; j++)
            {
                int x = i;
                int y = j;
                <div class="connectfour-gamepiece
                         connectfour-@board.Board[i,j].Color.ToString().ToLower()" @onclick="@(() => board.PieceClicked(x,y))"
                     style="@(board.IsGamePieceAWinningPiece(i, j)? "opacity: 0.6" : "")"></div>
            }
        </div>
    }
</div>